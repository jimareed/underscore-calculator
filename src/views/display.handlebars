<form id="calculator" onload="myFunction()" action="calculate/enter" enctype="application/json" method="post">
  <br/>
  <table border="1">
  <tr><td>
  <div align="center"><b>underscore-calculator</b></div>
  <table>
  <tr>
  <td width="516"><input type="button" id="register-3" class="registers" value=""/></td>
  </tr>
  <tr>
  <td><input id="register-2" type="button" class="registers" value=""/></td>
  </tr>
  <tr>
  <td><input id="register-1" type="button" class="registers" value=""/></td>
  </tr>
  <tr>
  <td><input id="register-0" type="button" class="registers" value=""/></td>
  </tr>
  <tr>
  <td><input id="input" class="buttons" value=""/></td>
  </tr>
  </table>
  </td></tr>
  <tr><td>
  <table>
    <tr>
      <td width="100"><input type="button" name="load" class="buttons" value="load" onClick="calc('load')"/></td>
      <td width="100"><input type="button" name="save" class="buttons" value="save" onClick="calc('save')"/></td>
      <td width="100"><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td width="100"><input type="button" name="r-down" class="buttons" value="r-down" onClick="calc('r-down')"/></td>
      <td width="100"><input type="button" name="x-y" class="buttons" value="x-y" onClick="calc('x-y')"/></td>
    </tr>
    <tr>
      <td><input type="button" name="recall" class="buttons" value="recall" onClick="calc('recall')"/></td>
      <td><input type="button" name="store" class="buttons" value="store" onClick="calc('store')"/></td>
      <td><input type="button" name="swap" class="buttons" value="swap" onClick="calc('swap')"/></td>
      <td><input type="button" name="up" class="buttons" value="up" onClick="calc('up')"/></td>
      <td><input type="button" name="rec" class="buttons" value="record" onClick="calc('record')"/></td>
    </tr>
    <tr>
      <td><input type="button" name="get" class="buttons" value="get" onClick="calc('get')"/></td>
      <td><input type="button" name="put" class="buttons" value="put" onClick="calc('put')"/></td>
      <td><input type="button" name="left" class="buttons" value="left" onClick="calc('left')"/></td>
      <td><input type="button" name="down" class="buttons" value="down" onClick="calc('down')"/></td>
      <td><input type="button" name="right" class="buttons" value="right" onClick="calc('right')"/></td>
    </tr>
    <tr>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
    </tr>
    <tr>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
      <td><input type="button" name="" class="buttons" value="" onClick="calc('')"/></td>
    </tr>
  </table>
	<table>
		<tr>
      <td width="204"><input type="submit" name="enter" class="buttons" value="enter" /></td>
			<td width="100"><input type="button" name="uniq" class="buttons" value="uniq" onClick="calc('uniq')"/></td>
      <td width="100"><input type="button" name="pluck" class="buttons" value="pluck" onClick="calc('pluck')"/></td>
      <td width="100"><input type="button" name="function" class="buttons" value="function" onClick="calc('function')"/></td>
		</tr>
  </table>
  <table>
    <tr>
      <td width="100"><input type="button" class="buttons" name="[ ]" value="[ ]" onClick="add('[]')"/></td>
      <td width="100"><input type="button" class="buttons" name="7" value="7" onClick="add('7')"/></td>
      <td width="100"><input type="button" class="buttons" name="8" value="8" onClick="add('8')"/></td>
      <td width="100"><input type="button" class="buttons" name="9" value="9" onClick="add('9')"/></td>
      <td width="100"><input type="button" class="buttons" name="/" value="/" onClick="calc('divide')"/></td>
    </tr>
    <tr>
      <td><input type="button" class="buttons" name="{ }" value="{ }" onClick="add('{}')"/></td>
      <td><input type="button" class="buttons" name="4" value="4" onClick="add('4')"/></td>
      <td><input type="button" class="buttons" name="5" value="5" onClick="add('5')"/></td>
      <td><input type="button" class="buttons" name="6" value="6" onClick="add('6')"/></td>
      <td><input type="button" class="buttons" name="*" value="*" onClick="calc('multiply')"/></td>
    </tr>
    <tr>
      <td><input type="button" class="buttons" name="" value="" onClick="add('')"/></td>
      <td><input type="button" class="buttons" name="1" value="1" onClick="add('1')"/></td>
      <td><input type="button" class="buttons" name="2" value="2" onClick="add('2')"/></td>
      <td><input type="button" class="buttons" name="3" value="3" onClick="add('3')"/></td>
      <td><input type="button" class="buttons" name="-" value="-" onClick="calc('subtract')"/></td>
    </tr>
    <tr>
      <td><input type="button" class="buttons" name="" value="" onClick="add('')"/></td>
      <td><input type="button" class="buttons" name="0" value="0" onClick="add('0')"/></td>
      <td><input type="button" class="buttons" name="." value="." onClick="add('.')"/></td>
      <td><input type="button" class="buttons" name="," value="," onClick="add(',')"/></td>
      <td><input type="button" class="buttons" name="+" value="+" onClick="calc('add')"/></td>
    </tr>
	</table>
  </td></tr>
  </table>
</form>

<script>
display();


function display() {
	var registers = JSON.parse('{{{ data }}}');

	for (var i = 0; i < registers.length-2; i += 1) {
		for (j = 0; j < 1; j += 1) {
		  	document.getElementById("register-" + i).value = "";
		}
	}

	for (var i = 0; i < registers.length-2; i += 1) {
		var j = 0;
		for (var key in registers[i]) {
		  	document.getElementById("register-" + i).value = registers[i][key];
		  	j += 1;
		  	if (j == 1) {
		  		break;
		  	}
		}
	}
}

function calc2(operation) {
    var newpage = "/calculate/" + operation;
    window.location.assign(newpage);
}

function calc(operation) {
    document.getElementById("calculator").action = "/calculate/" + operation;
    document.getElementById("calculator").submit();
}

function add(value) {
  if (value == '[]') {
    document.getElementById("input").value = '[ ' + document.getElementById("input").value + ' ]';
  } else if (value == '{}') {
    document.getElementById("input").value = '{ ' + document.getElementById("input").value + ' }';
  } else {
    document.getElementById("input").value += value;
  }
}

</script>
